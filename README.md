# Moodle Course Export Plugin (local_course_exporter)

## Overview

The **Moodle Course Export Plugin** (`local_course_exporter`) enables administrators and teachers to generate a **PDF export** of an entire Moodle course. This export includes **sections, modules, and formatted content**, making it ideal for archiving, offline use, or sharing.

The plugin uses **TCPDF** for PDF generation, ensuring high-quality document output with proper formatting, emoji support, and embedded images.

## Features

- üìÑ **Export Full Course Structure** (sections, modules)
- üé® **Preserves Rich Formatting** (HTML, styles, images)
- üòä **Emoji Support** (automatic conversion to images)
- üìå **Bookmark Navigation** (table of contents in PDF)
- üñºÔ∏è **Custom Cover Page** (logo, title, teacher names, date)
- üîó **QR Code for Course Enrollment**
- üîÑ **Autoloading & Dependency Injection** (modern PHP practices)
- üîß **Extensible Module Support** (easy to add new module exports)

## Supported Modules

| Module     | Exported Content |
|------------|----------------|
| **Page**       | Full HTML content |
| **Glossary**   | Entries with definitions |
| **Simple Quiz** | Questions & answers |
| **Slideshow**  | Slide content |

Additional modules can be added by extending the `module_base` class.

## Usage

### Generate a Course PDF

Integrate the below URL in your existing plugin or access it directly (replacing COURSE_ID by the actual course id):
```
/local/course_exporter/export_as_pdf.php?courseid=COURSE_ID
```

## Configuration

The plugin requires no additional configuration but allows customization of:

- **Cover Page Appearance** (logo, colors)
- **Font Styles & Sizes**
- **Supported Modules** (extend `module_factory`)

## Development & Extensibility

### Adding a New Module

1. Create a new class in `classes/module/`, implementing `module_interface`:
   ```php
   class mymodule implements module_interface {
       public function export_to_pdf(\moodle_database $db, object $cm): string {
           // Fetch & format content
           return '<h2>' . $cm->name . '</h2>' . $content;
       }
   }
   ```

2. Register it in `module_factory.php`:
   ```php
   return match ($type) {
       'page' => new page(),
       'glossary' => new glossary(),
       'simplequiz' => new simplequiz(),
       'mymodule' => new mymodule(), // New module
       default => throw new \InvalidArgumentException("Unsupported module: {$type}"),
   };
   ```

## Troubleshooting

- **Missing Content?**
    - Check module support in `module_factory.php`.

- **Emoji Not Appearing?**
    - Verify that emoji images exist in `/pix/emoji/`.

---

Documentation generated by AI, reviewed and modified by human.
